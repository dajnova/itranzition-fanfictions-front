<p-growl [value]="msgs"></p-growl>
<app-navbar></app-navbar>
<div class="container">
  <div class="row">
    <div class="col-9">
      <h1 class="display-4">{{"Edit fanfic" | translate:user}}</h1>
    </div>
  </div>
  <hr class="my-1">
  <div class="row justify-content-center">
    <div class="col-md-9">
      <div class="row">
        <h3>{{'Fanfic title' | translate:user}}</h3>
      </div>
      <div class="row">
        <input type="text" class="form-control" [(ngModel)]="this.fanfic.title" placeholder="{{'Fanfic title' | translate:user}}">
      </div>
      <div class="row">
        <h3>{{'Fanfic description' | translate:user}}</h3>
      </div>
      <div class="row">
        <textarea class="form-control" [(ngModel)]="this.fanfic.description" id="exampleTextarea" rows="3"></textarea>
      </div>
      <div class="row">
        <h3>Genre</h3>
      </div>
      <div class="row">
        <p-autoComplete [(ngModel)]="this.fanfic.genre" [style]="{'width':'100%'}" [inputStyle]="{'width':'100%'}" [forceSelection]="true" placeholder="{{'genre' | translate:user}}" [suggestions]="availableGenres" (completeMethod)="filterGenre($event)"></p-autoComplete>
      </div>
      <div class="row">
        <h3>{{'tags'|translate:user}}</h3>
      </div>
      <div class="row">
        <p-autoComplete [(ngModel)]="this.fanfic.tags" [minLength]="1" [suggestions]="filteredTags" (completeMethod)="filterTagsMultiple($event)" placeholder="{{'Tags' | translate:user}}" [multiple]="true"></p-autoComplete>
      </div>
      <div class="row">
        <h3>{{'Fanfic image' | translate:user}}</h3>
      </div>
      <div class="row">
        <p-fileUpload name="demo[]" (onUpload)="onUpload($event)" styleClass=""
                      accept="image/*" maxFileSize="1000000">
          <ng-template pTemplate="content">
            <ul *ngIf="file">
              <li *ngFor="let file of uploadedFiles">{{file.name}} - {{file.size}} bytes</li>
            </ul>
          </ng-template>
        </p-fileUpload>
      </div>
      <div class="row">
        <h3>{{'Chapters list' | translate:user}}</h3>
      </div>
      <button type="button" (click)="addChapter()" class="btn btn-outline-primary">{{'Add chapter' | translate:user}}</button>
      <table class="table table-hover">
        <thead>
        <th scope="col">ID</th>
        <th scope="col">{{'titlechaptertable' | translate:user}}</th>
        <th scope="col">{{'delete'|translate:true}}</th>
        </thead>
        <tbody>
          <tr *ngFor="let chapter of chapters">
            <td>{{chapter.id}}</td>
            <td (click)="redactChapter(chapter)">{{chapter.title}}</td>
            <td (click)="deleteChapter(chapter.id)"><a href="">{{'delete' | translate:user}}</a></td>
          </tr>
        </tbody>
      </table>
      <hr class="my-1">
      <div class="row">
      <button type="button" id="submit" class="btn btn-outline-primary btn-lg">{{"Submit" | translate:user}}</button>
      </div>
    </div>
  </div>
</div>
<p-sidebar [(visible)]="visibleSidebar5" [fullScreen]="true" [baseZIndex]="10000">
  <div class="container">
    <div class="row">
      <h3>{{'Chapter title' | translate:user}}</h3>
    </div>
    <div class="row">
      <input type="text" class="form-control" [(ngModel)]="this.chapter.title" placeholder="{{'Chapter title' | translate:user}}">
    </div>
    <div class="row">
      <h3>{{'Chapter text' | translate:user}}</h3>
    </div>
      <p-editor [(ngModel)]="this.chapter.textblock" [style]="{'width':'100%','height':'320px'}"></p-editor>
    <div class="row">
      <h3>{{'Chapter image' | translate:user}}</h3>
    </div>
      <p-fileUpload name="demo[]" (onUpload)="onUpload($event)" styleClass=""
                    accept="image/*" maxFileSize="1000000">
        <ng-template pTemplate="content">
          <ul *ngIf="file">
            <li *ngFor="let file of uploadedFiles">{{file.name}} - {{file.size}} bytes</li>
          </ul>
        </ng-template>
      </p-fileUpload>
    <button pButton type="button" (click)="submit()" label="Save" class="ui-button-success"></button>
    <button pButton type="button" (click)="visibleSidebar5 = false" label="Cancel" class="ui-button-secondary"></button>
  </div>
</p-sidebar>
